<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Minecrafté¢¨ãƒ»å®Ÿç¸¾ã‚°ãƒªãƒƒãƒ‰</title>
  <style>
    :root {
      --bg: #0e0f10;
      --panel: #15191e;
      --border: #2b3139;
      --text: #dfe7ef;
      --muted: #8d99a6;
      --btn: #1e242b;
      --btn-hover: #28313a;
      --accent: #4caf50;
      --accent-glow: #b3ffb8;
      --gold: #f4c542;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; background: radial-gradient(1000px 600px at 20% -10%, #1b2027, var(--bg));
      color: var(--text); font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans JP", "Hiragino Kaku Gothic ProN", "Yu Gothic", Meiryo, sans-serif;
      display: grid; place-items: center; padding: 24px;
    }
    .app { width: min(1100px, 96vw); }

    header { display:flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 14px; flex-wrap: wrap; }
    h1 { font-size: clamp(18px, 2.3vw, 24px); margin: 0; letter-spacing: .02em; }
    .controls { display:flex; flex-wrap: wrap; gap: 8px; align-items: center; }

    .control, button, select, input[type="number"] {
      background: var(--btn); color: var(--text); border: 1px solid var(--border); border-radius: 10px; padding: 8px 12px;
      font: inherit; transition: transform .02s ease, background .2s ease, border-color .2s ease; outline: none;
    }
    button:hover, select:hover, input[type="number"]:hover { background: var(--btn-hover); }
    button:active { transform: translateY(1px); }

    .grid {
      background: linear-gradient(180deg, #13171c, var(--panel));
      border: 1px solid var(--border); border-radius: 16px; padding: 16px; position: relative;
    }

    .cells { display: grid; gap: 12px; }

    .cell { position: relative; }
    .cell button {
      width: 100%; aspect-ratio: 1 / 1; border-radius: 14px; cursor: pointer; position: relative; overflow: hidden;
      background: #0f1419; border: 1px solid #212932; box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
      min-width: 44px; min-height: 44px;
    }
    .cell button .label { position: absolute; left: 10px; bottom: 8px; right: 10px; font-size: 12px; color: var(--muted); line-height: 1.2; }
    .cell button .badge { position: absolute; top: 8px; right: 8px; font-size: 11px; padding: 4px 8px; border-radius: 999px; background: #1b222a; border:1px solid #2a313a; color: var(--muted); }

    .cell button::before { content:""; position:absolute; inset:0; opacity:.18; background-image:
        linear-gradient(45deg, #0b0f13 25%, transparent 25%),
        linear-gradient(-45deg, #0b0f13 25%, transparent 25%),
        linear-gradient(45deg, transparent 75%, #0b0f13 75%),
        linear-gradient(-45deg, transparent 75%, #0b0f13 75%);
      background-size: 16px 16px; background-position: 0 0, 0 8px, 8px -8px, -8px 0; }

    .cell button.lit {
      border-color: rgba(76, 175, 80, .7);
      box-shadow: 0 0 0 1px rgba(76, 175, 80, .35), 0 4px 22px 0 rgba(76, 175, 80, .25), inset 0 0 18px rgba(76, 175, 80, .25);
      background: radial-gradient(120px 120px at 30% 20%, rgba(76,175,80,.20), transparent), #0f1419;
    }
    .cell button.lit::after {
      content:""; position:absolute; inset:-4px; border-radius: 16px; pointer-events: none;
      box-shadow: 0 0 22px 8px rgba(179,255,184,.12);
      animation: pulse 1.6s ease-in-out infinite;
    }
    @keyframes pulse { 0%{ opacity:.45 } 50%{ opacity:.1 } 100%{ opacity:.45 } }

    .cell button.legendary { border-color: rgba(244,197,66,.7); }
    .cell button.legendary.lit {
      box-shadow: 0 0 0 1px rgba(244,197,66,.45), 0 6px 26px 0 rgba(244,197,66,.35), inset 0 0 22px rgba(244,197,66,.3);
      background: radial-gradient(120px 120px at 30% 20%, rgba(244,197,66,.22), transparent), #0f1419;
    }

    .footer { display:flex; justify-content: space-between; align-items: center; margin-top: 12px; color: var(--muted); font-size: 13px; }
    .count { font-variant-numeric: tabular-nums; }

    /* ğŸ“± ã‚¹ãƒãƒ›ç”¨èª¿æ•´ */
    @media (max-width: 600px) {
      body { padding: 12px; }
      header { flex-direction: column; align-items: flex-start; gap: 8px; }
      .controls { width: 100%; justify-content: flex-start; }
      .cell button .label { font-size: 10px; }
      .cell button .badge { font-size: 9px; padding: 2px 6px; }
      h1 { font-size: 16px; }
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>ãƒã‚¤ãƒ³ã‚¯ãƒ©ãƒ•ãƒˆé¢¨ãƒ»å®Ÿç¸¾ã‚°ãƒªãƒƒãƒ‰ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§ç‚¹ç¯ï¼‰</h1>
      <div class="controls">
        <label class="control">ã‚µã‚¤ã‚ºï¼š
          <input id="rows" type="number" min="1" max="12" value="4" style="width:4.5em; margin-left:.5em;">
          Ã—
          <input id="cols" type="number" min="1" max="12" value="5" style="width:4.5em; margin-left:.5em;">
        </label>
        <select id="preset">
          <option value="">ãƒ—ãƒªã‚»ãƒƒãƒˆï¼ˆä¾‹ï¼‰</option>
          <option value="starter">ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼</option>
          <option value="adventure">ã‚¢ãƒ‰ãƒ™ãƒ³ãƒãƒ£ãƒ¼</option>
          <option value="builder">ãƒ“ãƒ«ãƒ€ãƒ¼</option>
        </select>
        <button id="apply">ä½œæˆ / å¤‰æ›´</button>
        <button id="reset">ã™ã¹ã¦æ¶ˆç¯</button>
        <button id="save">ä¿å­˜</button>
        <button id="load">èª­è¾¼</button>
      </div>
    </header>

    <section class="grid">
      <div id="cells" class="cells"></div>
      <div class="footer">
        <div class="count"><span id="litCount">0</span> / <span id="totalCount">0</span> è§£æ”¾</div>
        <div class="hint">ã‚»ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯ã§ç‚¹ç¯/æ¶ˆç¯</div>
      </div>
    </section>
  </div>

  <script>
    const cellsEl = document.getElementById('cells');
    const rowsEl = document.getElementById('rows');
    const colsEl = document.getElementById('cols');
    const applyBtn = document.getElementById('apply');
    const resetBtn = document.getElementById('reset');
    const saveBtn = document.getElementById('save');
    const loadBtn = document.getElementById('load');
    const presetEl = document.getElementById('preset');
    const litCountEl = document.getElementById('litCount');
    const totalCountEl = document.getElementById('totalCount');

    const PRESETS = {
      starter: { size:[3,4], labels:['æœ¨ã‚’æ®´ã‚Œï¼','ä½œæ¥­å°','æœ¨ã®ãƒ„ãƒ¼ãƒ«','ãƒ™ãƒƒãƒ‰','ã‹ã¾ã©','çŸ³ã®ãƒ„ãƒ¼ãƒ«','ãŸã„ã¾ã¤','é£Ÿæ–™ã‚’ç¢ºä¿','çŸ³ç‚­ã‚²ãƒƒãƒˆ','é©ã®è£…å‚™','é‡£ã‚Š','ãƒã‚¶ãƒ¼ã¸â€¦?'], legendary:[0, 11] },
      adventure: { size:[4,5], labels:['æ—…ã®å§‹ã¾ã‚Š','åœ°å›³ã‚’ä½œæˆ','æ‘ã‚’ç™ºè¦‹','äº¤æ˜“','ãƒ”ãƒªã‚¸ãƒ£ãƒ¼æ’ƒé€€','ãƒã‚¶ãƒ¼è¦å¡','ãƒ–ãƒ¬ã‚¤ã‚ºãƒ­ãƒƒãƒ‰','ã‚¨ãƒ³ãƒ€ãƒ¼ãƒ‘ãƒ¼ãƒ«','è¦å¡ç™ºè¦‹','ãƒãƒ¼ã‚¿ãƒ«èµ·å‹•','ã‚¨ãƒ³ãƒ‰ã¸','ã‚¯ãƒªã‚¹ã‚¿ãƒ«ç ´å£Š','å¸°é‚„','ã‚¨ãƒªãƒˆãƒ©å…¥æ‰‹','ãƒ“ãƒ¼ã‚³ãƒ³'], legendary:[10, 14] },
      builder: { size:[4,4], labels:['å®¶ã‚’å»ºç¯‰','ç•‘ã‚’ä½œã‚‹','é“ã‚’æ•·ã','ç‰§å ´','å€‰åº«','è‡ªå‹•ã‹ã¾ã©','è£…é£¾ãƒ–ãƒ­ãƒƒã‚¯','å™´æ°´','ãƒ¬ãƒƒãƒ‰ã‚¹ãƒˆãƒ¼ãƒ³å…¥é–€','ãƒ”ã‚¹ãƒˆãƒ³ãƒ‰ã‚¢','ã‚¯ãƒ­ãƒƒã‚¯å›è·¯','æ°´æµã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼','å¤©ç©ºãƒˆãƒ©ãƒƒãƒ—','ãƒã‚¶ãƒ¼é‰„é“','ãƒ¡ã‚¬å»ºç¯‰','ãƒ¯ãƒ¼ãƒ«ãƒ‰ãƒ„ã‚¢ãƒ¼'], legendary:[12, 15] }
    };

    let R = 4, C = 5;
    let labels = [];
    let legendary = new Set();

    function buildGrid(r=R, c=C, givenLabels=null) {
      R = r; C = c;
      cellsEl.style.gridTemplateColumns = `repeat(${C}, minmax(50px, 1fr))`; // â† min 50px ã«å¤‰æ›´
      labels = givenLabels && givenLabels.length ? givenLabels.slice(0, r*c) : Array.from({length: r*c}, (_,i)=>`å®Ÿç¸¾ ${i+1}`);
      while (labels.length < r*c) labels.push(`å®Ÿç¸¾ ${labels.length+1}`);

      cellsEl.innerHTML = '';
      for (let i=0; i<r*c; i++) {
        const cell = document.createElement('div');
        cell.className = 'cell';
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.dataset.idx = i;
        btn.setAttribute('aria-pressed', 'false');
        if (legendary.has(i)) btn.classList.add('legendary');
        btn.innerHTML = `<span class="badge">#${(i+1)}</span><span class="label"></span>`;
        btn.querySelector('.label').textContent = labels[i];
        btn.addEventListener('click', () => toggle(btn));
        cell.appendChild(btn);
        cellsEl.appendChild(cell);
      }
      updateCounts();
      totalCountEl.textContent = r*c;
    }

    function toggle(btn){
      const lit = btn.classList.toggle('lit');
      btn.setAttribute('aria-pressed', String(lit));
      updateCounts();
    }

    function updateCounts(){
      const lit = cellsEl.querySelectorAll('button.lit').length;
      litCountEl.textContent = lit;
    }

    function applySizeFromInputs(){
      const r = clamp(parseInt(rowsEl.value||'4',10), 1, 12);
      const c = clamp(parseInt(colsEl.value||'5',10), 1, 12);
      buildGrid(r, c, labels);
    }

    function clamp(v, min, max){ return Math.max(min, Math.min(max, v)); }

    const KEY = 'mc_like_achievements_v1';
    function save(){
      const litIndices = Array.from(cellsEl.querySelectorAll('button.lit')).map(b=>+b.dataset.idx);
      const data = { R, C, labels, legendary:[...legendary], lit: litIndices };
      localStorage.setItem(KEY, JSON.stringify(data));
      alert('ä¿å­˜ã—ã¾ã—ãŸ');
    }
    function load(){
      const raw = localStorage.getItem(KEY);
      if (!raw) { alert('ä¿å­˜ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“'); return; }
      try {
        const data = JSON.parse(raw);
        R = data.R; C = data.C; labels = data.labels || []; legendary = new Set(data.legendary || []);
        rowsEl.value = R; colsEl.value = C;
        buildGrid(R, C, labels);
        for (const idx of data.lit || []) {
          const btn = cellsEl.querySelector(`button[data-idx="${idx}"]`);
          if (btn) { btn.classList.add('lit'); btn.setAttribute('aria-pressed','true'); }
        }
        updateCounts();
        alert('èª­è¾¼å®Œäº†');
      } catch(e){ alert('èª­è¾¼ã«å¤±æ•—ã—ã¾ã—ãŸ'); }
    }

    function resetAll(){
      cellsEl.querySelectorAll('button.lit').forEach(b=>{ b.classList.remove('lit'); b.setAttribute('aria-pressed','false'); });
      updateCounts();
    }

    function usePreset(name){
      const p = PRESETS[name]; if (!p) return;
      legendary = new Set(p.legendary || []);
      rowsEl.value = p.size[0]; colsEl.value = p.size[1];
      buildGrid(p.size[0], p.size[1], p.labels);
    }

    applyBtn.addEventListener('click', applySizeFromInputs);
    resetBtn.addEventListener('click', resetAll);
    saveBtn.addEventListener('click', save);
    loadBtn.addEventListener('click', load);
    presetEl.addEventListener('change', (e)=>{ if (e.target.value) usePreset(e.target.value); });

    buildGrid(R, C, labels);
  </script>
</body>
</html>

